(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){var _scope__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),commands={range:function range(scope,option){var params=option.params,start=params[0],end=params[1],step=params[2];step?(start>end&&step>0||start<end&&step<0)&&(step=-step):step=start>end?-1:1;for(var ret=[],i=start;start<end?i<end:i>end;i+=step)ret.push(i);return ret},void:function _void(){},foreach:function foreach(scope,option,buffer_){var xcount,opScope,affix,xindex,buffer=buffer_,params=option.params,param0=params[0],xindexName=params[2]||"xindex",valueName=params[1];if(param0)for(xcount=param0.length,xindex=0;xindex<xcount;xindex++)affix=(opScope=new _scope__WEBPACK_IMPORTED_MODULE_0__.a(param0[xindex],{xcount:xcount,xindex:xindex},scope)).affix,"xindex"!==xindexName&&(affix[xindexName]=xindex,affix.xindex=void 0),valueName&&(affix[valueName]=param0[xindex]),buffer=option.fn(opScope,buffer);return buffer},forin:function forin(scope,option,buffer_){var opScope,affix,name,buffer=buffer_,params=option.params,param0=params[0],xindexName=params[2]||"xindex",valueName=params[1];if(param0)for(name in param0)param0.hasOwnProperty(name)&&(affix=(opScope=new _scope__WEBPACK_IMPORTED_MODULE_0__.a(param0[name],{xindex:name},scope)).affix,"xindex"!==xindexName&&(affix[xindexName]=name,affix.xindex=void 0),valueName&&(affix[valueName]=param0[name]),buffer=option.fn(opScope,buffer));return buffer},each:function each(scope,option,buffer){var param0=option.params[0];return param0?_util__WEBPACK_IMPORTED_MODULE_1__.a.isArray(param0)?commands.foreach(scope,option,buffer):commands.forin(scope,option,buffer):buffer},with:function _with(scope,option,buffer_){var buffer=buffer_,param0=option.params[0];if(param0){var opScope=new _scope__WEBPACK_IMPORTED_MODULE_0__.a(param0,void 0,scope);buffer=option.fn(opScope,buffer)}return buffer},if:function _if(scope,option,buffer_){var buffer=buffer_;if(option.params[0]){var fn=option.fn;fn&&(buffer=fn(scope,buffer))}else{var matchElseIf=!1,elseIfs=option.elseIfs,inverse=option.inverse;if(elseIfs)for(var i=0,len=elseIfs.length;i<len;i++){var elseIf=elseIfs[i];if(matchElseIf=elseIf.test(scope)){buffer=elseIf.fn(scope,buffer);break}}!matchElseIf&&inverse&&(buffer=inverse(scope,buffer))}return buffer},set:function set(scope_,option,buffer){for(var scope=scope_,hash=option.hash,len=hash.length,i=0;i<len;i++){var h=hash[i],parts=h.key,depth=h.depth,value=h.value;if(1===parts.length){for(var root=scope.root;depth&&root!==scope;)scope=scope.parent,--depth;scope.set(parts[0],value)}else{var last=scope.resolve(parts.slice(0,-1),depth);last&&(last[parts[parts.length-1]]=value)}}return buffer},include:1,includeOnce:1,parse:1,extend:1,block:function block(scope,option,buffer_){var type,buffer=buffer_,runtime=this.runtime,params=option.params,blockName=params[0];2===params.length&&(type=params[0],blockName=params[1]);var cursor,blocks=runtime.blocks=runtime.blocks||{},head=blocks[blockName],current={fn:option.fn,type:type};if(head){if(head.type)if("append"===head.type)current.next=head,blocks[blockName]=current;else if("prepend"===head.type){var prev;for(cursor=head;cursor&&"prepend"===cursor.type;)prev=cursor,cursor=cursor.next;current.next=cursor,prev.next=current}}else blocks[blockName]=current;if(!runtime.extendTpl)for(cursor=blocks[blockName];cursor;)cursor.fn&&(buffer=cursor.fn.call(this,scope,buffer)),cursor=cursor.next;return buffer},macro:function macro(scope,option,buffer_){var buffer=buffer_,hash=option.hash,params=option.params,macroName=params[0],params1=params.slice(1),runtime=this.runtime,macros=runtime.macros=runtime.macros||{},macro=macros[macroName];if(option.fn)macros[macroName]={paramNames:params1,hash:hash,fn:option.fn};else if(macro){var paramValues=macro.hash||{},paramNames=macro.paramNames;if(paramNames)for(var i=0,len=paramNames.length;i<len;i++){paramValues[paramNames[i]]=params1[i]}if(hash)for(var h in hash)hash.hasOwnProperty(h)&&(paramValues[h]=hash[h]);var newScope=new _scope__WEBPACK_IMPORTED_MODULE_0__.a(paramValues);newScope.root=scope.root,buffer=macro.fn.call(this,newScope,buffer)}else{var error="can not find macro: ".concat(macroName);buffer.error(error)}return buffer},debugger:function debuggerFn(){_util__WEBPACK_IMPORTED_MODULE_1__.a.globalEval("debugger")}};__webpack_exports__.a=commands}).call(this,__webpack_require__(97))},14:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var _escape_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(226),SUBSTITUTE_REG=/\\?\{([^{}]+)\}/g,win=void 0!==global?global:self,toString=Object.prototype.toString,util={isArray:Array.isArray||function isArray(obj){return"[object Array]"===toString.call(obj)},keys:Object.keys||function keys(o){var p,result=[];for(p in o)o.hasOwnProperty(p)&&result.push(p);return result},each:function each(object,fn){var context=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(object){var key,val,keys,i=0,length=object&&object.length,isObj=void 0===length||"[object Function]"===Object.prototype.toString.call(object);if(isObj)for(keys=util.keys(object);i<keys.length&&(key=keys[i],!1!==fn.call(context,object[key],key,object));i++);else for(val=object[0];i<length&&!1!==fn.call(context,val,i,object);val=object[++i]);}return object},mix:function mix(t,s){if(s)for(var p in s)s.hasOwnProperty(p)&&(t[p]=s[p]);return t},globalEval:function globalEval(data){win&&(win.execScript?win.execScript(data):function run(d){win.eval.call(win,d)}(data))},substitute:function substitute(str,o,regexp){return"string"==typeof str&&o?str.replace(regexp||SUBSTITUTE_REG,function(match,name){return"\\"===match.charAt(0)?match.slice(1):void 0===o[name]?"":o[name]}):str},escapeHtml:_escape_html__WEBPACK_IMPORTED_MODULE_0__.a,normalizePath:function normalizePath(str){return str.replace(/\\/g,"/")},splitPath:function splitPath(str){return util.normalizePath(str).split("/")},merge:function merge(){for(var i=0,len=arguments.length,ret={};i<len;i++){var arg=i<0||arguments.length<=i?void 0:arguments[i];arg&&util.mix(ret,arg)}return ret}};__webpack_exports__.a=util}).call(this,__webpack_require__(11))},20:function(module,__webpack_exports__,__webpack_require__){"use strict";function Scope(data,affix,parent){this.data=void 0!==data?data:{},parent?(this.parent=parent,this.root=parent.root):(this.parent=void 0,this.root=this),this.affix=affix||{},this.ready=!1}Scope.prototype={isScope:1,constructor:Scope,setParent:function setParent(parentScope){this.parent=parentScope,this.root=parentScope.root},set:function set(name,value){this.affix[name]=value},setData:function setData(data){this.data=data},getData:function getData(){return this.data},mix:function mix(v){var affix=this.affix;for(var name in v)v.hasOwnProperty(name)&&(affix[name]=v[name])},get:function get(name){var v,data=this.data,affix=this.affix;return null!=data&&(v=data[name]),void 0!==v?v:affix[name]},resolveInternalOuter:function resolveInternalOuter(parts){var v,part0=parts[0],scope=this;if("this"===part0)v=this.data;else if("root"===part0)v=(scope=scope.root).data;else{if(!part0)return[scope.data];do{v=scope.get(part0)}while(void 0===v&&(scope=scope.parent))}return[void 0,v]},resolveInternal:function resolveInternal(parts){var i,ret=this.resolveInternalOuter(parts);if(1===ret.length)return ret[0];var len=parts.length,v=ret[1];if(void 0!==v){for(i=1;i<len;i++){if(null==v)return v;v=v[parts[i]]}return v}},resolveLooseInternal:function resolveLooseInternal(parts){var i,ret=this.resolveInternalOuter(parts);if(1===ret.length)return ret[0];var len=parts.length,v=ret[1];for(i=1;null!=v&&i<len;i++)v=v[parts[i]];return v},resolveUp:function resolveUp(parts){return this.parent&&this.parent.resolveInternal(parts)},resolveLooseUp:function resolveLooseUp(parts){return this.parent&&this.parent.resolveLooseInternal(parts)},resolveOuter:function resolveOuter(parts,d){var v,scope=this,depth=d;if(!depth&&1===parts.length){if(void 0!==(v=this.get(parts[0])))return[v];depth=1}if(depth)for(;scope&&depth--;)scope=scope.parent;return scope?[void 0,scope]:[void 0]},resolveLoose:function resolveLoose(parts,depth){var ret=this.resolveOuter(parts,depth);return 1===ret.length?ret[0]:ret[1].resolveLooseInternal(parts)},resolve:function resolve(parts,depth){var ret=this.resolveOuter(parts,depth);return 1===ret.length?ret[0]:ret[1].resolveInternal(parts)}},__webpack_exports__.a=Scope},226:function(module,__webpack_exports__,__webpack_require__){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var matchHtmlRegExp=/["'&<>]/;__webpack_exports__.a=function escapeHtml(string){var escape,str=""+string,match=matchHtmlRegExp.exec(str);if(!match)return str;var html="",index=0,lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#39;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}lastIndex!==index&&(html+=str.substring(lastIndex,index)),lastIndex=index+1,html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}},229:function(module,exports,__webpack_require__){__webpack_require__(230),__webpack_require__(333),module.exports=__webpack_require__(334)},334:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{theme:{brandTitle:"xtemplate",brandUrl:"https://github.com/xtemplate/xtemplate/"}}});var req=__webpack_require__(496);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(81)(module))},45:function(module,__webpack_exports__,__webpack_require__){"use strict";var util=__webpack_require__(14),commands=__webpack_require__(138),src_scope=__webpack_require__(20);function Buffer(list,next,tpl){this.list=list,this.init(),this.next=next,this.ready=!1,this.tpl=tpl}function LinkedBuffer(callback,config){this.config=config,this.head=new Buffer(this,void 0),this.callback=callback,this.init()}Buffer.prototype={constructor:Buffer,isBuffer:1,init:function init(){this.data=""},append:function append(data){return this.data+=data,this},write:function write(data){if(null!=data){if(data.isBuffer)return data;this.data+=data}return this},writeEscaped:function writeEscaped(data){if(null!=data){if(data.isBuffer)return data;this.data+=util.a.escapeHtml(data)}return this},insert:function insert(){var list=this.list,tpl=this.tpl,nextFragment=new Buffer(list,this.next,tpl),asyncFragment=new Buffer(list,nextFragment,tpl);return this.next=asyncFragment,this.ready=!0,asyncFragment},async:function async(fn){var asyncFragment=this.insert(),nextFragment=asyncFragment.next;return fn(asyncFragment),nextFragment},error:function error(e_){var callback=this.list.callback,e=e_;if(callback){var tpl=this.tpl;if(tpl){e instanceof Error||(e=new Error(e));var name=tpl.name,line=tpl.pos.line,errorStr="XTemplate error in file: ".concat(name," at line ").concat(line,": ");try{e.stack=errorStr+e.stack,e.message=errorStr+e.message}catch(e2){}e.xtpl={pos:{line:line},name:name}}this.list.callback=null,callback(e,void 0)}},end:function end(){return this.list.callback&&(this.ready=!0,this.list.flush()),this}},LinkedBuffer.prototype={constructor:LinkedBuffer,init:function init(){this.data=""},append:function append(data){this.data+=data},end:function end(){this.callback(null,this.data),this.callback=null},flush:function flush(){for(var fragment=this.head;fragment;){if(!fragment.ready)return void(this.head=fragment);this.data+=fragment.data,fragment=fragment.next}this.end()}},LinkedBuffer.Buffer=Buffer;var linked_buffer=LinkedBuffer,src_commands={},splitPath=util.a.splitPath;function TplWrap(name,runtime,root,scope,buffer,originalName,fn,parent){this.name=name,this.originalName=originalName||name,this.runtime=runtime,this.root=root,this.pos={line:1},this.scope=scope,this.buffer=buffer,this.fn=fn,this.parent=parent}function callFn(tpl,scope,option,buffer,parts,depth){var caller,fn,command1;if(depth||(command1=function findCommand(runtimeCommands,instanceCommands,parts){var name=parts[0],cmd=runtimeCommands&&runtimeCommands[name]||instanceCommands&&instanceCommands[name]||src_commands[name];if(1===parts.length)return cmd;if(cmd)for(var len=parts.length,i=1;i<len;i++)if(!(cmd=cmd[parts[i]]))return!1;return cmd}(tpl.runtime.commands,tpl.root.config.commands,parts)),command1)return command1.call(tpl,scope,option,buffer);if(!1!==command1){var callerParts=parts.slice(0,-1);if(null==(caller=scope.resolve(callerParts,depth)))return buffer.error("Execute function `".concat(parts.join("."),"` Error: ").concat(callerParts.join(".")," is undefined or null")),buffer;if(fn=caller[parts[parts.length-1]])try{return fn.apply(caller,option.params||[])}catch(err){return buffer.error("Execute function `".concat(parts.join("."),"` Error: ").concat(err.message)),buffer}}return buffer.error("Command Not Found: ".concat(parts.join("."))),buffer}var utils={callFn:callFn,callDataFn:function callDataFn(params,parts){for(var caller=parts[0],fn=caller,i=1;i<parts.length;i++){var name=parts[i];if(!fn||!fn[name])return"";caller=fn,fn=fn[name]}return fn.apply(caller,params||[])},callCommand:function callCommand(tpl,scope,option,buffer,parts){return callFn(tpl,scope,option,buffer,parts)}};function XTemplateRuntime(fn,config){this.fn=fn,this.config=util.a.merge(XTemplateRuntime.globalConfig,config),this.subNameResolveCache={},this.loadedSubTplNames={}}function resolve(root,subName_,parentName){var subName=subName_;if("."!==subName.charAt(0))return subName;var key="".concat(parentName,"_ks_").concat(subName),nameResolveCache=root.subNameResolveCache,cached=nameResolveCache[key];return cached||(subName=nameResolveCache[key]=function getSubNameFromParentName(parentName,subName){if(!parentName)throw new Error("parent template must have name!");var parts=splitPath(parentName),subParts=splitPath(subName);parts.pop();for(var i=0,l=subParts.length;i<l;i++){var subPart=subParts[i];"."!==subPart&&(".."===subPart?parts.pop():parts.push(subPart))}return parts.join("/")}(parentName,subName))}function includeInternal(root,scope,escape,buffer,tpl,originalName){var name=resolve(root,originalName,tpl.name),newBuffer=buffer.insert(),next=newBuffer.next;return function loadInternal(root,name,runtime,scope,buffer,originalName,escape,parentTpl){var tpl=new TplWrap(name,runtime,root,scope,buffer,originalName,void 0,parentTpl);buffer.tpl=tpl,root.config.loader.load(tpl,function(error,tplFn_){var tplFn=tplFn_;"function"==typeof tplFn?(tpl.fn=tplFn,renderTpl(tpl)):error?buffer.error(error):(tplFn=tplFn||"",escape?buffer.writeEscaped(tplFn):buffer.data+=tplFn,buffer.end())})}(root,name,tpl.runtime,scope,newBuffer,originalName,escape,buffer.tpl),next}function includeModuleInternal(root,scope,buffer,tpl,tplFn){var newBuffer=buffer.insert(),next=newBuffer.next,newTpl=new TplWrap(tplFn.TPL_NAME,tpl.runtime,root,scope,newBuffer,void 0,tplFn,buffer.tpl);return newBuffer.tpl=newTpl,renderTpl(newTpl),next}function renderTpl(tpl){var buffer=tpl.fn();if(buffer){var extendTplName,runtime=tpl.runtime,extendTpl=runtime.extendTpl;if(extendTpl&&!(extendTplName=extendTpl.params[0]))return buffer.error("extend command required a non-empty parameter");var extendTplFn=runtime.extendTplFn,extendTplBuffer=runtime.extendTplBuffer;return extendTplFn?(runtime.extendTpl=null,runtime.extendTplBuffer=null,runtime.extendTplFn=null,includeModuleInternal(tpl.root,tpl.scope,extendTplBuffer,tpl,extendTplFn).end()):extendTplName&&(runtime.extendTpl=null,runtime.extendTplBuffer=null,includeInternal(tpl.root,tpl.scope,0,extendTplBuffer,tpl,extendTplName).end()),buffer.end()}}function getIncludeScope(scope,option,buffer){var params=option.params;if(!params[0])return buffer.error("include command required a non-empty parameter");var newScope=scope,newScopeData=params[1],hash=option.hash;return hash&&(newScopeData=newScopeData?util.a.mix({},newScopeData):{},util.a.mix(newScopeData,hash)),newScopeData&&(newScope=new src_scope.a(newScopeData,void 0,scope)),newScope}function checkIncludeOnce(root,option,tpl){var name=resolve(root,option.params[0],tpl.name),loadedSubTplNames=root.loadedSubTplNames;return!loadedSubTplNames[name]&&(loadedSubTplNames[name]=!0,!0)}util.a.mix(XTemplateRuntime,{Scope:src_scope.a,LinkedBuffer:linked_buffer,globalConfig:{},config:function config(key,v){var globalConfig=this.globalConfig;if(void 0===key)return globalConfig;void 0!==v?globalConfig[key]=v:util.a.mix(globalConfig,key)},nativeCommands:commands.a,utils:utils,util:util.a,addCommand:function addCommand(commandName,fn){src_commands[commandName]=fn},removeCommand:function removeCommand(commandName){delete src_commands[commandName]}}),XTemplateRuntime.prototype={constructor:XTemplateRuntime,Scope:src_scope.a,nativeCommands:commands.a,utils:utils,removeCommand:function removeCommand(commandName){var config=this.config;config.commands&&delete config.commands[commandName]},addCommand:function addCommand(commandName,fn){var config=this.config;config.commands=config.commands||{},config.commands[commandName]=fn},include:function include(scope,option,buffer,tpl){return includeInternal(this,getIncludeScope(scope,option,buffer),option.escape,buffer,tpl,option.params[0])},includeModule:function includeModule(scope,option,buffer,tpl){return includeModuleInternal(this,getIncludeScope(scope,option,buffer),buffer,tpl,option.params[0])},includeOnce:function includeOnce(scope,option,buffer,tpl){return checkIncludeOnce(this,option,tpl)?this.include(scope,option,buffer,tpl):buffer},includeOnceModule:function includeOnceModule(scope,option,buffer,tpl){return checkIncludeOnce(this,option,tpl)?this.includeModule(scope,option,buffer,tpl):buffer},render:function render(data,option_,callback_){var _this=this,option=option_,callback=callback_,html="",fn=this.fn,config=this.config;"function"==typeof option&&(callback=option,option=null),option=option||{},callback||(callback=function callback(error_,ret){var error=error_;if(error)throw error instanceof Error||(error=new Error(error)),error;html=ret});var scope,name=this.config.name;!name&&fn&&fn.TPL_NAME&&(name=fn.TPL_NAME),scope=data instanceof src_scope.a?data:new src_scope.a(data);var buffer=new linked_buffer(callback,config).head,tpl=new TplWrap(name,{commands:option.commands},this,scope,buffer,name,fn);return buffer.tpl=tpl,fn?(renderTpl(tpl),html):(config.loader.load(tpl,function(err,fn2){fn2?(tpl.fn=_this.fn=fn2,renderTpl(tpl)):err&&buffer.error(err)}),html)}};var src=XTemplateRuntime,src_parser=function(undefined){var parser={},GrammarConst_SHIFT_TYPE=1,GrammarConst_REDUCE_TYPE=2,GrammarConst_ACCEPT_TYPE=0,GrammarConst_TYPE_INDEX=0,GrammarConst_PRODUCTION_INDEX=1,GrammarConst_TO_INDEX=2;function peekStack(stack,n){return n=n||1,stack[stack.length-n]}function mix(to,from){for(var f in from)to[f]=from[f]}function each(object,fn,context){if(object){var key,val,length,i=0;if(context=context||null,function isArray(obj){return"[object Array]"===Object.prototype.toString.call(obj)}(object))for(length=object.length,val=object[0];i<length&&!1!==fn.call(context,val,i,object);val=object[++i]);else for(key in object)if(!1===fn.call(context,object[key],key,object))break}}var Lexer=function Lexer(cfg){this.rules=[],mix(this,cfg),this.resetInput(this.input)};Lexer.prototype={resetInput:function resetInput(input){mix(this,{input:input,matched:"",stateStack:[Lexer.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function getCurrentRules(){var currentState=this.stateStack[this.stateStack.length-1],rules=[];return this.mapState&&(currentState=this.mapState(currentState)),each(this.rules,function(r){var state=r.state||r[3];state?function inArray(item,arr){for(var i=0,l=arr.length;i<l;i++)if(arr[i]===item)return!0;return!1}(currentState,state)&&rules.push(r):currentState===Lexer.STATIC.INITIAL&&rules.push(r)}),rules},pushState:function pushState(state){this.stateStack.push(state)},popState:function popState(num){var ret;for(num=num||1;num--;)ret=this.stateStack.pop();return ret},showDebugInfo:function showDebugInfo(){var DEBUG_CONTEXT_LIMIT=Lexer.STATIC.DEBUG_CONTEXT_LIMIT,matched=this.matched,match=this.match,input=this.input,past=((matched=matched.slice(0,matched.length-match.length)).length>DEBUG_CONTEXT_LIMIT?"...":"")+matched.slice(0-DEBUG_CONTEXT_LIMIT).replace(/\n/g," "),next=match+input;return past+(next=next.slice(0,DEBUG_CONTEXT_LIMIT).replace(/\n/g," ")+(next.length>DEBUG_CONTEXT_LIMIT?"...":""))+"\n"+new Array(past.length+1).join("-")+"^"},mapSymbol:function mapSymbolForCodeGen(t){return this.symbolMap[t]},mapReverseSymbol:function mapReverseSymbol(rs){var i,symbolMap=this.symbolMap,reverseSymbolMap=this.reverseSymbolMap;if(!reverseSymbolMap&&symbolMap)for(i in reverseSymbolMap=this.reverseSymbolMap={},symbolMap)reverseSymbolMap[symbolMap[i]]=i;return reverseSymbolMap?reverseSymbolMap[rs]:rs},lex:function lex(){var i,rule,m,ret,lines,input=this.input,rules=this.getCurrentRules();if(this.match=this.text="",!input)return this.mapSymbol(Lexer.STATIC.END_TAG);for(i=0;i<rules.length;i++){var match,regexp=(rule=rules[i]).regexp||rule[1],token=rule.token||rule[0],action=rule.action||rule[2]||void 0;if(m=input.match(regexp))return(lines=m[0].match(/\n.*/g))&&(this.lineNumber+=lines.length),mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber,firstColumn:this.lastColumn,lastColumn:lines?lines[lines.length-1].length-1:this.lastColumn+m[0].length}),match=this.match=m[0],this.matches=m,this.text=match,this.matched+=match,ret=void 0===(ret=action&&action.call(this))?token:this.mapSymbol(ret),input=input.slice(match.length),this.input=input,ret||this.lex()}}},Lexer.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var lexer=new Lexer({rules:[[0,/^[\s\S]*?(?={{)/,function(){var m,text=this.text,n=0;return(m=text.match(/\\+$/))&&(n=m[0].length),n%2?(this.pushState("et"),text=text.slice(0,-1)):this.pushState("t"),n&&(text=text.replace(/\\+$/g,function(m){return new Array(m.length/2+1).join("\\")})),this.text=text,"CONTENT"}],["b",/^[\s\S]+/,0],["b",/^[\s\S]{2,}?(?:(?={{)|$)/,function popState(){this.popState()},["et"]],["c",/^{{\{?~?(?:#|@)/,function(){"{{{"===this.text.slice(0,3)?this.pushState("p"):this.pushState("e")},["t"]],["d",/^{{\{?~?\//,function(){"{{{"===this.text.slice(0,3)?this.pushState("p"):this.pushState("e")},["t"]],["e",/^{{\s*else\s*}}/,function popState(){this.popState()},["t"]],[0,/^{{![\s\S]*?}}/,function popState(){this.popState()},["t"]],["b",/^{{%([\s\S]*?)%}}/,function(){this.text=this.matches[1]||"",this.popState()},["t"]],["f",/^{{\{?~?/,function(){"{{{"===this.text.slice(0,3)?this.pushState("p"):this.pushState("e")},["t"]],[0,/^\s+/,0,["p","e"]],["g",/^,/,0,["p","e"]],["h",/^~?}}}/,function(){this.popState(2)},["p"]],["h",/^~?}}/,function(){this.popState(2)},["e"]],["i",/^\(/,0,["p","e"]],["j",/^\)/,0,["p","e"]],["k",/^\|\|/,0,["p","e"]],["l",/^&&/,0,["p","e"]],["m",/^===/,0,["p","e"]],["n",/^!==/,0,["p","e"]],["o",/^>=/,0,["p","e"]],["p",/^<=/,0,["p","e"]],["q",/^>/,0,["p","e"]],["r",/^</,0,["p","e"]],["s",/^\+/,0,["p","e"]],["t",/^-/,0,["p","e"]],["u",/^\*/,0,["p","e"]],["v",/^\//,0,["p","e"]],["w",/^%/,0,["p","e"]],["x",/^!/,0,["p","e"]],["y",/^"(\\[\s\S]|[^\\"\n])*"/,function(){this.text=this.text.slice(1,-1).replace(/\\"/g,'"')},["p","e"]],["y",/^'(\\[\s\S]|[^\\'\n])*'/,function(){this.text=this.text.slice(1,-1).replace(/\\'/g,"'")},["p","e"]],["z",/^\d+(?:\.\d+)?(?:e-?\d+)?/i,0,["p","e"]],["aa",/^=/,0,["p","e"]],["ab",/^\.\./,function(){this.pushState("ws")},["p","e"]],["ac",/^\//,function popState(){this.popState()},["ws"]],["ac",/^\./,0,["p","e"]],["ad",/^\[/,0,["p","e"]],["ae",/^\]/,0,["p","e"]],["af",/^\{/,0,["p","e"]],["ag",/^\:/,0,["p","e"]],["ah",/^\?/,0,["p","e"]],["ai",/^\}/,0,["p","e"]],["ab",/^[a-zA-Z_$][a-zA-Z0-9_$]*/,0,["p","e"]]]});return parser.lexer=lexer,lexer.symbolMap={$EOF:"a",CONTENT:"b",OPEN_BLOCK:"c",OPEN_CLOSE_BLOCK:"d",INVERSE:"e",OPEN_TPL:"f",COMMA:"g",CLOSE:"h",L_PAREN:"i",R_PAREN:"j",OR:"k",AND:"l",LOGIC_EQUALS:"m",LOGIC_NOT_EQUALS:"n",GE:"o",LE:"p",GT:"q",LT:"r",PLUS:"s",MINUS:"t",MULTIPLY:"u",DIVIDE:"v",MODULUS:"w",NOT:"x",STRING:"y",NUMBER:"z",EQUALS:"aa",ID:"ab",SEP:"ac",L_BRACKET:"ad",R_BRACKET:"ae",L_BRACE:"af",COLON:"ag",QUERY:"ah",R_BRACE:"ai",$START:"aj",program:"ak",statements:"al",statement:"am",function:"an",id:"ao",expression:"ap",params:"aq",hash:"ar",param:"as",conditionalExpression:"at",listExpression:"au",objectExpression:"av",objectPart:"aw",conditionalOrExpression:"ax",conditionalAndExpression:"ay",equalityExpression:"az",relationalExpression:"ba",additiveExpression:"bb",multiplicativeExpression:"bc",unaryExpression:"bd",primaryExpression:"be",hashSegment:"bf",idSegments:"bg"},parser.productions=[["aj",["ak"]],["ak",["al","e","al"],function(){return new this.yy.ProgramNode({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1,this.$3)}],["ak",["al"],function(){return new this.yy.ProgramNode({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1)}],["al",["am"],function(){return[this.$1]}],["al",["al","am"],function(){var statements=this.$1,statement=this.$2;if(statements.length){var lastStatement=statements[statements.length-1];lastStatement.rtrim&&statement&&"contentStatement"===statement.type&&!statement.value.trim()||(statement.ltrim&&lastStatement&&"contentStatement"===lastStatement.type&&!lastStatement.value.trim()?statements[statements.length-1]=statement:statements.push(statement))}else statements.push(statement)}],["am",["c","an","h","ak","d","ao","h"],function(){var program=this.$4,openBlock=this.$1,lastClose=this.$7,statements=program.statements,close=this.$3,openCloseBlock=this.$5;-1!==close.indexOf("~}")&&statements[0]&&"contentStatement"===statements[0].type&&(statements[0].value.trim()||statements.shift()),-1!==openCloseBlock.indexOf("{~")&&statements[statements.length-1]&&"contentStatement"===statements[statements.length-1].type&&(statements[statements.length-1].value.trim()||statements.pop());var statement=new this.yy.BlockStatement({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$2,program,this.$6,"{{{"!==this.$1.slice(0,3));return-1!==openBlock.indexOf("{~")&&(statement.ltrim=1),-1!==lastClose.indexOf("~}")&&(statement.rtrim=1),statement}],["am",["f","ap","h"],function(){var openTpl=this.$1,close=this.$3,statement=new this.yy.ExpressionStatement({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$2,"{{{"!==this.$1.slice(0,3));return-1!==openTpl.indexOf("{~")&&(statement.ltrim=1),-1!==close.indexOf("~}")&&(statement.rtrim=1),statement}],["am",["b"],function(){return new this.yy.ContentStatement({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1)}],["an",["ao","i","aq","g","ar","j"],function(){return new this.yy.Function({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1,this.$3,this.$5)}],["an",["ao","i","aq","j"],function(){return new this.yy.Function({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1,this.$3)}],["an",["ao","i","ar","j"],function(){return new this.yy.Function({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1,null,this.$3)}],["an",["ao","i","j"],function(){return new this.yy.Function({filename:this.lexer.filename,line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1)}],["aq",["aq","g","as"],function(){this.$1.push(this.$3)}],["aq",["as"],function(){return[this.$1]}],["as",["ap"]],["ap",["at"]],["ap",["ad","au","ae"],function(){return new this.yy.ArrayExpression(this.$2)}],["ap",["ad","ae"],function(){return new this.yy.ArrayExpression([])}],["ap",["af","av","ai"],function(){return new this.yy.ObjectExpression(this.$2)}],["ap",["af","ai"],function(){return new this.yy.ObjectExpression([])}],["aw",["y","ag","ap"],function(){return[this.$1,this.$3]}],["aw",["ab","ag","ap"],function(){return[this.$1,this.$3]}],["av",["aw"],function(){return[this.$1]}],["av",["av","g","aw"],function(){this.$1.push(this.$3)}],["au",["ap"],function(){return[this.$1]}],["au",["au","g","ap"],function(){this.$1.push(this.$3)}],["at",["ax"]],["at",["ax","ah","ax","ag","at"],function(){return new this.yy.ConditionalExpression(this.$1,this.$3,this.$5)}],["ax",["ay"]],["ax",["ax","k","ay"],function(){return new this.yy.ConditionalOrExpression(this.$1,this.$3)}],["ay",["az"]],["ay",["ay","l","az"],function(){return new this.yy.ConditionalAndExpression(this.$1,this.$3)}],["az",["ba"]],["az",["az","m","ba"],function(){return new this.yy.EqualityExpression(this.$1,"===",this.$3)}],["az",["az","n","ba"],function(){return new this.yy.EqualityExpression(this.$1,"!==",this.$3)}],["ba",["bb"]],["ba",["ba","r","bb"],function(){return new this.yy.RelationalExpression(this.$1,"<",this.$3)}],["ba",["ba","q","bb"],function(){return new this.yy.RelationalExpression(this.$1,">",this.$3)}],["ba",["ba","p","bb"],function(){return new this.yy.RelationalExpression(this.$1,"<=",this.$3)}],["ba",["ba","o","bb"],function(){return new this.yy.RelationalExpression(this.$1,">=",this.$3)}],["bb",["bc"]],["bb",["bb","s","bc"],function(){return new this.yy.AdditiveExpression(this.$1,"+",this.$3)}],["bb",["bb","t","bc"],function(){return new this.yy.AdditiveExpression(this.$1,"-",this.$3)}],["bc",["bd"]],["bc",["bc","u","bd"],function(){return new this.yy.MultiplicativeExpression(this.$1,"*",this.$3)}],["bc",["bc","v","bd"],function(){return new this.yy.MultiplicativeExpression(this.$1,"/",this.$3)}],["bc",["bc","w","bd"],function(){return new this.yy.MultiplicativeExpression(this.$1,"%",this.$3)}],["bd",["x","bd"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bd",["t","bd"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bd",["be"]],["be",["y"],function(){return new this.yy.String({line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1)}],["be",["z"],function(){return new this.yy.Number({line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1)}],["be",["ao"]],["be",["i","ap","j"],function(){return this.$2}],["ar",["ar","g","bf"],function(){this.$1.value.push(this.$3)}],["ar",["bf"],function(){return new this.yy.Hash({line:this.lexer.firstLine,col:this.lexer.firstColumn},[this.$1])}],["bf",["ao","aa","ap"],function(){return[this.$1,this.$3]}],["ao",["bg"],function(){return new this.yy.Id({line:this.lexer.firstLine,col:this.lexer.firstColumn},this.$1)}],["bg",["an"],function(){return[this.$1]}],["bg",["bg","ac","ab"],function(){this.$1.push(this.$3)}],["bg",["bg","ad","ap","ae"],function(){this.$1.push(this.$3)}],["bg",["ab"],function(){return[this.$1]}]],parser.table={gotos:{0:{ak:4,al:5,am:6},2:{an:8,ao:9,bg:10},3:{an:18,ao:19,ap:20,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},5:{am:31},11:{an:18,ao:19,ap:36,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},12:{an:18,ao:19,bd:37,be:29,bg:10},13:{an:18,ao:19,bd:38,be:29,bg:10},16:{an:18,ao:19,ap:40,at:21,au:41,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},17:{av:45,aw:46},30:{al:62,am:6},32:{ak:63,al:5,am:6},33:{an:18,ao:65,ap:66,aq:67,ar:68,as:69,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bf:70,bg:10},35:{an:18,ao:19,ap:72,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},48:{an:18,ao:19,ay:80,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},49:{an:18,ao:19,ax:81,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},50:{an:18,ao:19,az:82,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},51:{an:18,ao:19,ba:83,bb:26,bc:27,bd:28,be:29,bg:10},52:{an:18,ao:19,ba:84,bb:26,bc:27,bd:28,be:29,bg:10},53:{an:18,ao:19,bb:85,bc:27,bd:28,be:29,bg:10},54:{an:18,ao:19,bb:86,bc:27,bd:28,be:29,bg:10},55:{an:18,ao:19,bb:87,bc:27,bd:28,be:29,bg:10},56:{an:18,ao:19,bb:88,bc:27,bd:28,be:29,bg:10},57:{an:18,ao:19,bc:89,bd:28,be:29,bg:10},58:{an:18,ao:19,bc:90,bd:28,be:29,bg:10},59:{an:18,ao:19,bd:91,be:29,bg:10},60:{an:18,ao:19,bd:92,be:29,bg:10},61:{an:18,ao:19,bd:93,be:29,bg:10},62:{am:31},74:{an:18,ao:19,ap:101,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},76:{an:18,ao:19,ap:102,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},77:{an:18,ao:19,ap:103,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},78:{aw:104},94:{an:18,ao:106,bg:10},95:{an:18,ao:19,ap:107,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10},96:{an:18,ao:65,ap:66,ar:108,as:109,at:21,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bf:70,bg:10},98:{an:18,ao:110,bf:111,bg:10},105:{an:18,ao:19,at:112,ax:22,ay:23,az:24,ba:25,bb:26,bc:27,bd:28,be:29,bg:10}},action:{0:{b:[1,void 0,1],c:[1,void 0,2],f:[1,void 0,3]},1:{a:[2,7],e:[2,7],c:[2,7],f:[2,7],b:[2,7],d:[2,7]},2:{ab:[1,void 0,7]},3:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},4:{a:[0]},5:{a:[2,2],d:[2,2],b:[1,void 0,1],c:[1,void 0,2],e:[1,void 0,30],f:[1,void 0,3]},6:{a:[2,3],e:[2,3],c:[2,3],f:[2,3],b:[2,3],d:[2,3]},7:{i:[2,61],ac:[2,61],ad:[2,61],h:[2,61],ah:[2,61],k:[2,61],l:[2,61],m:[2,61],n:[2,61],o:[2,61],p:[2,61],q:[2,61],r:[2,61],s:[2,61],t:[2,61],u:[2,61],v:[2,61],w:[2,61],j:[2,61],ae:[2,61],g:[2,61],aa:[2,61],ag:[2,61],ai:[2,61]},8:{i:[2,58],ac:[2,58],ad:[2,58],h:[1,void 0,32]},9:{i:[1,void 0,33]},10:{i:[2,57],h:[2,57],ah:[2,57],k:[2,57],l:[2,57],m:[2,57],n:[2,57],o:[2,57],p:[2,57],q:[2,57],r:[2,57],s:[2,57],t:[2,57],u:[2,57],v:[2,57],w:[2,57],j:[2,57],ae:[2,57],g:[2,57],aa:[2,57],ag:[2,57],ai:[2,57],ac:[1,void 0,34],ad:[1,void 0,35]},11:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},12:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},13:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},14:{h:[2,50],ah:[2,50],k:[2,50],l:[2,50],m:[2,50],n:[2,50],o:[2,50],p:[2,50],q:[2,50],r:[2,50],s:[2,50],t:[2,50],u:[2,50],v:[2,50],w:[2,50],j:[2,50],ae:[2,50],g:[2,50],ag:[2,50],ai:[2,50]},15:{h:[2,51],ah:[2,51],k:[2,51],l:[2,51],m:[2,51],n:[2,51],o:[2,51],p:[2,51],q:[2,51],r:[2,51],s:[2,51],t:[2,51],u:[2,51],v:[2,51],w:[2,51],j:[2,51],ae:[2,51],g:[2,51],ag:[2,51],ai:[2,51]},16:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],ae:[1,void 0,39],af:[1,void 0,17]},17:{y:[1,void 0,42],ab:[1,void 0,43],ai:[1,void 0,44]},18:{h:[2,58],ah:[2,58],i:[2,58],k:[2,58],l:[2,58],m:[2,58],n:[2,58],o:[2,58],p:[2,58],q:[2,58],r:[2,58],s:[2,58],t:[2,58],u:[2,58],v:[2,58],w:[2,58],ac:[2,58],ad:[2,58],j:[2,58],ae:[2,58],g:[2,58],aa:[2,58],ag:[2,58],ai:[2,58]},19:{h:[2,52],ah:[2,52],k:[2,52],l:[2,52],m:[2,52],n:[2,52],o:[2,52],p:[2,52],q:[2,52],r:[2,52],s:[2,52],t:[2,52],u:[2,52],v:[2,52],w:[2,52],j:[2,52],ae:[2,52],g:[2,52],ag:[2,52],ai:[2,52],i:[1,void 0,33]},20:{h:[1,void 0,47]},21:{h:[2,15],j:[2,15],ae:[2,15],g:[2,15],ai:[2,15]},22:{h:[2,26],j:[2,26],ae:[2,26],g:[2,26],ai:[2,26],k:[1,void 0,48],ah:[1,void 0,49]},23:{h:[2,28],ah:[2,28],k:[2,28],j:[2,28],ae:[2,28],g:[2,28],ag:[2,28],ai:[2,28],l:[1,void 0,50]},24:{h:[2,30],ah:[2,30],k:[2,30],l:[2,30],j:[2,30],ae:[2,30],g:[2,30],ag:[2,30],ai:[2,30],m:[1,void 0,51],n:[1,void 0,52]},25:{h:[2,32],ah:[2,32],k:[2,32],l:[2,32],m:[2,32],n:[2,32],j:[2,32],ae:[2,32],g:[2,32],ag:[2,32],ai:[2,32],o:[1,void 0,53],p:[1,void 0,54],q:[1,void 0,55],r:[1,void 0,56]},26:{h:[2,35],ah:[2,35],k:[2,35],l:[2,35],m:[2,35],n:[2,35],o:[2,35],p:[2,35],q:[2,35],r:[2,35],j:[2,35],ae:[2,35],g:[2,35],ag:[2,35],ai:[2,35],s:[1,void 0,57],t:[1,void 0,58]},27:{h:[2,40],ah:[2,40],k:[2,40],l:[2,40],m:[2,40],n:[2,40],o:[2,40],p:[2,40],q:[2,40],r:[2,40],s:[2,40],t:[2,40],j:[2,40],ae:[2,40],g:[2,40],ag:[2,40],ai:[2,40],u:[1,void 0,59],v:[1,void 0,60],w:[1,void 0,61]},28:{h:[2,43],ah:[2,43],k:[2,43],l:[2,43],m:[2,43],n:[2,43],o:[2,43],p:[2,43],q:[2,43],r:[2,43],s:[2,43],t:[2,43],u:[2,43],v:[2,43],w:[2,43],j:[2,43],ae:[2,43],g:[2,43],ag:[2,43],ai:[2,43]},29:{h:[2,49],ah:[2,49],k:[2,49],l:[2,49],m:[2,49],n:[2,49],o:[2,49],p:[2,49],q:[2,49],r:[2,49],s:[2,49],t:[2,49],u:[2,49],v:[2,49],w:[2,49],j:[2,49],ae:[2,49],g:[2,49],ag:[2,49],ai:[2,49]},30:{b:[1,void 0,1],c:[1,void 0,2],f:[1,void 0,3]},31:{a:[2,4],e:[2,4],c:[2,4],f:[2,4],b:[2,4],d:[2,4]},32:{b:[1,void 0,1],c:[1,void 0,2],f:[1,void 0,3]},33:{i:[1,void 0,11],j:[1,void 0,64],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},34:{ab:[1,void 0,71]},35:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},36:{j:[1,void 0,73]},37:{h:[2,48],ah:[2,48],k:[2,48],l:[2,48],m:[2,48],n:[2,48],o:[2,48],p:[2,48],q:[2,48],r:[2,48],s:[2,48],t:[2,48],u:[2,48],v:[2,48],w:[2,48],j:[2,48],ae:[2,48],g:[2,48],ag:[2,48],ai:[2,48]},38:{h:[2,47],ah:[2,47],k:[2,47],l:[2,47],m:[2,47],n:[2,47],o:[2,47],p:[2,47],q:[2,47],r:[2,47],s:[2,47],t:[2,47],u:[2,47],v:[2,47],w:[2,47],j:[2,47],ae:[2,47],g:[2,47],ag:[2,47],ai:[2,47]},39:{h:[2,17],j:[2,17],ae:[2,17],g:[2,17],ai:[2,17]},40:{ae:[2,24],g:[2,24]},41:{g:[1,void 0,74],ae:[1,void 0,75]},42:{ag:[1,void 0,76]},43:{ag:[1,void 0,77]},44:{h:[2,19],j:[2,19],ae:[2,19],g:[2,19],ai:[2,19]},45:{g:[1,void 0,78],ai:[1,void 0,79]},46:{ai:[2,22],g:[2,22]},47:{a:[2,6],e:[2,6],c:[2,6],f:[2,6],b:[2,6],d:[2,6]},48:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},49:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},50:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},51:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},52:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},53:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},54:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},55:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},56:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},57:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},58:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},59:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},60:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},61:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},62:{a:[2,1],d:[2,1],b:[1,void 0,1],c:[1,void 0,2],f:[1,void 0,3]},63:{d:[1,void 0,94]},64:{h:[2,11],i:[2,11],ac:[2,11],ad:[2,11],ah:[2,11],k:[2,11],l:[2,11],m:[2,11],n:[2,11],o:[2,11],p:[2,11],q:[2,11],r:[2,11],s:[2,11],t:[2,11],u:[2,11],v:[2,11],w:[2,11],j:[2,11],ae:[2,11],g:[2,11],aa:[2,11],ag:[2,11],ai:[2,11]},65:{g:[2,52],j:[2,52],ah:[2,52],k:[2,52],l:[2,52],m:[2,52],n:[2,52],o:[2,52],p:[2,52],q:[2,52],r:[2,52],s:[2,52],t:[2,52],u:[2,52],v:[2,52],w:[2,52],i:[1,void 0,33],aa:[1,void 0,95]},66:{g:[2,14],j:[2,14]},67:{g:[1,void 0,96],j:[1,void 0,97]},68:{g:[1,void 0,98],j:[1,void 0,99]},69:{g:[2,13],j:[2,13]},70:{j:[2,55],g:[2,55]},71:{i:[2,59],ac:[2,59],ad:[2,59],h:[2,59],ah:[2,59],k:[2,59],l:[2,59],m:[2,59],n:[2,59],o:[2,59],p:[2,59],q:[2,59],r:[2,59],s:[2,59],t:[2,59],u:[2,59],v:[2,59],w:[2,59],j:[2,59],ae:[2,59],g:[2,59],aa:[2,59],ag:[2,59],ai:[2,59]},72:{ae:[1,void 0,100]},73:{h:[2,53],ah:[2,53],k:[2,53],l:[2,53],m:[2,53],n:[2,53],o:[2,53],p:[2,53],q:[2,53],r:[2,53],s:[2,53],t:[2,53],u:[2,53],v:[2,53],w:[2,53],j:[2,53],ae:[2,53],g:[2,53],ag:[2,53],ai:[2,53]},74:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},75:{h:[2,16],j:[2,16],ae:[2,16],g:[2,16],ai:[2,16]},76:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},77:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},78:{y:[1,void 0,42],ab:[1,void 0,43]},79:{h:[2,18],j:[2,18],ae:[2,18],g:[2,18],ai:[2,18]},80:{h:[2,29],ah:[2,29],k:[2,29],j:[2,29],ae:[2,29],g:[2,29],ag:[2,29],ai:[2,29],l:[1,void 0,50]},81:{k:[1,void 0,48],ag:[1,void 0,105]},82:{h:[2,31],ah:[2,31],k:[2,31],l:[2,31],j:[2,31],ae:[2,31],g:[2,31],ag:[2,31],ai:[2,31],m:[1,void 0,51],n:[1,void 0,52]},83:{h:[2,33],ah:[2,33],k:[2,33],l:[2,33],m:[2,33],n:[2,33],j:[2,33],ae:[2,33],g:[2,33],ag:[2,33],ai:[2,33],o:[1,void 0,53],p:[1,void 0,54],q:[1,void 0,55],r:[1,void 0,56]},84:{h:[2,34],ah:[2,34],k:[2,34],l:[2,34],m:[2,34],n:[2,34],j:[2,34],ae:[2,34],g:[2,34],ag:[2,34],ai:[2,34],o:[1,void 0,53],p:[1,void 0,54],q:[1,void 0,55],r:[1,void 0,56]},85:{h:[2,39],ah:[2,39],k:[2,39],l:[2,39],m:[2,39],n:[2,39],o:[2,39],p:[2,39],q:[2,39],r:[2,39],j:[2,39],ae:[2,39],g:[2,39],ag:[2,39],ai:[2,39],s:[1,void 0,57],t:[1,void 0,58]},86:{h:[2,38],ah:[2,38],k:[2,38],l:[2,38],m:[2,38],n:[2,38],o:[2,38],p:[2,38],q:[2,38],r:[2,38],j:[2,38],ae:[2,38],g:[2,38],ag:[2,38],ai:[2,38],s:[1,void 0,57],t:[1,void 0,58]},87:{h:[2,37],ah:[2,37],k:[2,37],l:[2,37],m:[2,37],n:[2,37],o:[2,37],p:[2,37],q:[2,37],r:[2,37],j:[2,37],ae:[2,37],g:[2,37],ag:[2,37],ai:[2,37],s:[1,void 0,57],t:[1,void 0,58]},88:{h:[2,36],ah:[2,36],k:[2,36],l:[2,36],m:[2,36],n:[2,36],o:[2,36],p:[2,36],q:[2,36],r:[2,36],j:[2,36],ae:[2,36],g:[2,36],ag:[2,36],ai:[2,36],s:[1,void 0,57],t:[1,void 0,58]},89:{h:[2,41],ah:[2,41],k:[2,41],l:[2,41],m:[2,41],n:[2,41],o:[2,41],p:[2,41],q:[2,41],r:[2,41],s:[2,41],t:[2,41],j:[2,41],ae:[2,41],g:[2,41],ag:[2,41],ai:[2,41],u:[1,void 0,59],v:[1,void 0,60],w:[1,void 0,61]},90:{h:[2,42],ah:[2,42],k:[2,42],l:[2,42],m:[2,42],n:[2,42],o:[2,42],p:[2,42],q:[2,42],r:[2,42],s:[2,42],t:[2,42],j:[2,42],ae:[2,42],g:[2,42],ag:[2,42],ai:[2,42],u:[1,void 0,59],v:[1,void 0,60],w:[1,void 0,61]},91:{h:[2,44],ah:[2,44],k:[2,44],l:[2,44],m:[2,44],n:[2,44],o:[2,44],p:[2,44],q:[2,44],r:[2,44],s:[2,44],t:[2,44],u:[2,44],v:[2,44],w:[2,44],j:[2,44],ae:[2,44],g:[2,44],ag:[2,44],ai:[2,44]},92:{h:[2,45],ah:[2,45],k:[2,45],l:[2,45],m:[2,45],n:[2,45],o:[2,45],p:[2,45],q:[2,45],r:[2,45],s:[2,45],t:[2,45],u:[2,45],v:[2,45],w:[2,45],j:[2,45],ae:[2,45],g:[2,45],ag:[2,45],ai:[2,45]},93:{h:[2,46],ah:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],j:[2,46],ae:[2,46],g:[2,46],ag:[2,46],ai:[2,46]},94:{ab:[1,void 0,7]},95:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},96:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7],ad:[1,void 0,16],af:[1,void 0,17]},97:{h:[2,9],i:[2,9],ac:[2,9],ad:[2,9],ah:[2,9],k:[2,9],l:[2,9],m:[2,9],n:[2,9],o:[2,9],p:[2,9],q:[2,9],r:[2,9],s:[2,9],t:[2,9],u:[2,9],v:[2,9],w:[2,9],j:[2,9],ae:[2,9],g:[2,9],aa:[2,9],ag:[2,9],ai:[2,9]},98:{ab:[1,void 0,7]},99:{h:[2,10],i:[2,10],ac:[2,10],ad:[2,10],ah:[2,10],k:[2,10],l:[2,10],m:[2,10],n:[2,10],o:[2,10],p:[2,10],q:[2,10],r:[2,10],s:[2,10],t:[2,10],u:[2,10],v:[2,10],w:[2,10],j:[2,10],ae:[2,10],g:[2,10],aa:[2,10],ag:[2,10],ai:[2,10]},100:{i:[2,60],ac:[2,60],ad:[2,60],h:[2,60],ah:[2,60],k:[2,60],l:[2,60],m:[2,60],n:[2,60],o:[2,60],p:[2,60],q:[2,60],r:[2,60],s:[2,60],t:[2,60],u:[2,60],v:[2,60],w:[2,60],j:[2,60],ae:[2,60],g:[2,60],aa:[2,60],ag:[2,60],ai:[2,60]},101:{ae:[2,25],g:[2,25]},102:{ai:[2,20],g:[2,20]},103:{ai:[2,21],g:[2,21]},104:{ai:[2,23],g:[2,23]},105:{i:[1,void 0,11],t:[1,void 0,12],x:[1,void 0,13],y:[1,void 0,14],z:[1,void 0,15],ab:[1,void 0,7]},106:{h:[1,void 0,113],i:[1,void 0,33]},107:{j:[2,56],g:[2,56]},108:{g:[1,void 0,98],j:[1,void 0,114]},109:{g:[2,12],j:[2,12]},110:{i:[1,void 0,33],aa:[1,void 0,95]},111:{j:[2,54],g:[2,54]},112:{h:[2,27],j:[2,27],ae:[2,27],g:[2,27],ai:[2,27]},113:{a:[2,5],e:[2,5],c:[2,5],f:[2,5],b:[2,5],d:[2,5]},114:{h:[2,8],i:[2,8],ac:[2,8],ad:[2,8],ah:[2,8],k:[2,8],l:[2,8],m:[2,8],n:[2,8],o:[2,8],p:[2,8],q:[2,8],r:[2,8],s:[2,8],t:[2,8],u:[2,8],v:[2,8],w:[2,8],j:[2,8],ae:[2,8],g:[2,8],aa:[2,8],ag:[2,8],ai:[2,8]}}},parser.parse=function parse(input,filename){var state,symbol,ret,action,$$,self=this,lexer=self.lexer,table=self.table,gotos=table.gotos,tableAction=table.action,productions=self.productions,prefix=filename?"in file: "+filename+" ":"",valueStack=[],stateStack=[0],symbolStack=[];for(lexer.resetInput(input);;){if(state=peekStack(stateStack),symbol||(symbol=lexer.lex()),!(action=symbol?tableAction[state]&&tableAction[state][symbol]:null)){var error,expected=[];throw tableAction[state]&&each(tableAction[state],function(v,symbolForState){action=v[GrammarConst_TYPE_INDEX];var map=[];map[GrammarConst_SHIFT_TYPE]="shift",map[GrammarConst_REDUCE_TYPE]="reduce",map[GrammarConst_ACCEPT_TYPE]="accept",expected.push(map[action]+":"+self.lexer.mapReverseSymbol(symbolForState))}),error=prefix+"syntax error at line "+lexer.lineNumber+":\n"+lexer.showDebugInfo()+"\nexpect "+expected.join(", "),new Error(error)}switch(action[GrammarConst_TYPE_INDEX]){case GrammarConst_SHIFT_TYPE:symbolStack.push(symbol),valueStack.push(lexer.text),stateStack.push(action[GrammarConst_TO_INDEX]),symbol=null;break;case GrammarConst_REDUCE_TYPE:var production=productions[action[GrammarConst_PRODUCTION_INDEX]],reducedSymbol=production.symbol||production[0],reducedAction=production.action||production[2],len=(production.rhs||production[1]).length;$$=peekStack(valueStack,len),ret=void 0,self.$$=$$;for(var i=0;i<len;i++)self["$"+(len-i)]=peekStack(valueStack,i+1);reducedAction&&(ret=reducedAction.call(self)),$$=void 0!==ret?ret:self.$$;var reverseIndex=-1*len;stateStack.splice(reverseIndex,len),valueStack.splice(reverseIndex,len),symbolStack.splice(reverseIndex,len),symbolStack.push(reducedSymbol),valueStack.push($$);var newState=gotos[peekStack(stateStack)][reducedSymbol];stateStack.push(newState);break;case GrammarConst_ACCEPT_TYPE:return $$}}},parser}(),ast={};ast.ProgramNode=function ProgramNode(pos,statements,inverse){this.pos=pos,this.statements=statements,this.inverse=inverse},ast.ProgramNode.prototype.type="program",ast.BlockStatement=function BlockStatement(pos,func,program,close,escape){var e,closeParts=close.parts;if(!function sameArray(a1,a2){var l1=a1.length;if(l1!==a2.length)return 0;for(var i=0;i<l1;i++)if(a1[i]!==a2[i])return 0;return 1}(func.id.parts,closeParts))throw e="in file: ".concat(pos.filename," syntax error at line ")+"".concat(pos.line,", col ").concat(pos.col,":\n")+"expect {{/".concat(func.id.parts,"}} not {{/").concat(closeParts,"}}"),new Error(e);this.escape=escape,this.pos=pos,this.func=func,this.program=program},ast.BlockStatement.prototype.type="blockStatement",ast.ExpressionStatement=function ExpressionStatement(pos,expression,escape){this.pos=pos,this.value=expression,this.escape=escape},ast.ExpressionStatement.prototype.type="expressionStatement",ast.ContentStatement=function ContentStatement(pos,value){this.pos=pos,this.value=value||""},ast.ContentStatement.prototype.type="contentStatement",ast.UnaryExpression=function UnaryExpression(unaryType,v){this.value=v,this.unaryType=unaryType},ast.Function=function Function(pos,id,params,hash){this.pos=pos,this.id=id,this.params=params,this.hash=hash},ast.Function.prototype.type="function",ast.UnaryExpression.prototype.type="unaryExpression",ast.MultiplicativeExpression=function MultiplicativeExpression(op1,opType,op2){this.op1=op1,this.opType=opType,this.op2=op2},ast.MultiplicativeExpression.prototype.type="multiplicativeExpression",ast.AdditiveExpression=function AdditiveExpression(op1,opType,op2){this.op1=op1,this.opType=opType,this.op2=op2},ast.AdditiveExpression.prototype.type="additiveExpression",ast.RelationalExpression=function RelationalExpression(op1,opType,op2){this.op1=op1,this.opType=opType,this.op2=op2},ast.RelationalExpression.prototype.type="relationalExpression",ast.EqualityExpression=function EqualityExpression(op1,opType,op2){this.op1=op1,this.opType=opType,this.op2=op2},ast.EqualityExpression.prototype.type="equalityExpression",ast.ConditionalAndExpression=function ConditionalAndExpression(op1,op2){this.op1=op1,this.op2=op2,this.opType="&&"},ast.ConditionalAndExpression.prototype.type="conditionalAndExpression",ast.ConditionalOrExpression=function ConditionalOrExpression(op1,op2){this.op1=op1,this.op2=op2,this.opType="||"},ast.ConditionalOrExpression.prototype.type="conditionalOrExpression",ast.ConditionalExpression=function ConditionalExpression(op1,op2,op3){this.op1=op1,this.op2=op2,this.op3=op3,this.opType="?:"},ast.ConditionalExpression.prototype.type="conditionalExpression",ast.String=function StringType(pos,value){this.pos=pos,this.value=value},ast.String.prototype.type="string",ast.Number=function NumberType(pos,value){this.pos=pos,this.value=value},ast.Number.prototype.type="number",ast.Hash=function Hash(pos,value){this.pos=pos,this.value=value},ast.Hash.prototype.type="hash",ast.ArrayExpression=function ArrayExpression(list){this.list=list},ast.ArrayExpression.prototype.type="arrayExpression",ast.ObjectExpression=function ObjectExpression(obj){this.obj=obj},ast.ObjectExpression.prototype.type="objectExpression",ast.Id=function Id(pos,raw){var parts=[],depth=0;this.pos=pos;for(var i=0,l=raw.length;i<l;i++){var p=raw[i];".."===p?depth++:parts.push(p)}this.parts=parts,this.string=parts.join("."),this.depth=depth},ast.Id.prototype.type="id";var src_ast=ast,doubleReg=/\\*"/g,singleReg=/\\*'/g,arrayPush=[].push,globals={};function genStackJudge(parts,data){var count=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,lastVariable_=arguments.length>3?arguments[3]:void 0;if(!parts.length)return data;var lastVariable=lastVariable_||data,part0=parts[0],variable="t".concat(count);return["(".concat(data," != null ? "),genStackJudge(parts.slice(1),"(".concat(variable," = ").concat(lastVariable+part0,")"),count+1,variable)," : ",lastVariable,")"].join("")}function accessVariable(loose,parts,topVariable,fullVariable){return loose?genStackJudge(parts.slice(1),topVariable):fullVariable}!function(){for(var globalKeys=["undefined","null","true","false"],i=0;i<globalKeys.length;i++)globals[globalKeys[i]]=1}();var tools={genStackJudge:genStackJudge,isGlobalId:function isGlobalId(node){return globals[node.string]?1:0},chainedVariableRead:function chainedVariableRead(self,source,idParts,root,resolveUp,loose){var strs=tools.convertIdPartsToRawAccessor(self,source,idParts),parts=strs.parts,part0=parts[0],scope="";root&&(scope="scope.root.");var affix="".concat(scope,"affix"),data="".concat(scope,"data"),ret=["(","(t=(".concat(affix+part0,")) !== undefined ? "),idParts.length>1?accessVariable(loose,parts,"t",affix+strs.str):"t"," : "];return resolveUp?ret=ret.concat(["(","(t = ".concat(data+part0,") !== undefined ? "),idParts.length>1?accessVariable(loose,parts,"t",data+strs.str):"t","  : ",loose?"scope.resolveLooseUp(".concat(strs.arr,")"):"scope.resolveUp(".concat(strs.arr,")"),")"]):ret.push(accessVariable(loose,parts,data+part0,data+strs.str)),ret.push(")"),ret.join("")},convertIdPartsToRawAccessor:function convertIdPartsToRawAccessor(self,source,idParts){var i,l,idPart,idPartType,nextIdNameCode,parts=[],ret=[],funcRet="";for(i=0,l=idParts.length;i<l;i++)(idPartType=(idPart=idParts[i]).type)?(nextIdNameCode=self[idPartType](idPart),tools.pushToArray(source,nextIdNameCode.source),"function"===idPartType&&(funcRet=1),ret.push("[ ".concat(nextIdNameCode.exp," ]")),parts.push(nextIdNameCode.exp)):(ret.push(".".concat(idPart)),parts.push(tools.wrapByDoubleQuote(idPart)));return{str:ret.join(""),arr:"[".concat(parts.join(","),"]"),parts:ret,funcRet:funcRet,resolvedParts:parts}},wrapByDoubleQuote:function wrapByDoubleQuote(str){return'"'.concat(str,'"')},wrapBySingleQuote:function wrapBySingleQuote(str){return"'".concat(str,"'")},joinArrayOfString:function joinArrayOfString(arr){return tools.wrapByDoubleQuote(arr.join('","'))},escapeSingleQuoteInCodeString:function escapeSingleQuoteInCodeString(str,isDouble){return str.replace(isDouble?doubleReg:singleReg,function(m_){var m=m_;return m.length%2&&(m="\\".concat(m)),m})},escapeString:function escapeString(str_,isCode){var str=str_;return str=(str=isCode?tools.escapeSingleQuoteInCodeString(str,0):str.replace(/\\/g,"\\\\").replace(/'/g,"\\'")).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")},pushToArray:function pushToArray(to,from){from&&arrayPush.apply(to,from)}},src_tools=tools;src_parser.yy=src_ast;for(var src_util=src.util,nativeCommands=src.nativeCommands,nativeUtils=src.utils,pushToArray=src_tools.pushToArray,wrapByDoubleQuote=src_tools.wrapByDoubleQuote,convertIdPartsToRawAccessor=src_tools.convertIdPartsToRawAccessor,wrapBySingleQuote=src_tools.wrapBySingleQuote,escapeString=src_tools.escapeString,chainedVariableRead=src_tools.chainedVariableRead,TMP_DECLARATION=["var t;"],i=0;i<10;i++)TMP_DECLARATION.push("var t".concat(i,";"));var TOP_DECLARATION=TMP_DECLARATION.concat(["var tpl = this;\n  var root = tpl.root;\n  var buffer = tpl.buffer;\n  var scope = tpl.scope;\n  var runtime = tpl.runtime;\n  var name = tpl.name;\n  var pos = tpl.pos;\n  var data = scope.data;\n  var affix = scope.affix;\n  var nativeCommands = root.nativeCommands;\n  var utils = root.utils;"]).join("\n"),CALL_NATIVE_COMMAND="{lhs} = {name}Command.call(tpl, scope, {option}, buffer);",CALL_CUSTOM_COMMAND="buffer = callCommandUtil(tpl, scope, {option}, buffer, {idParts});",CALL_FUNCTION="{lhs} = callFnUtil(tpl, scope, {option}, buffer, {idParts});",CALL_DATA_FUNCTION="{lhs} = callDataFnUtil([{params}], {idParts});",CALL_FUNCTION_DEPTH="{lhs} = callFnUtil(tpl, scope, {option}, buffer, {idParts}, {depth});",RETURN_BUFFER="return buffer;",nativeCode=[],substitute=src_util.substitute,each=src_util.each;each(nativeUtils,function(v,name){nativeCode.push(substitute('var {name}Util = utils["{name}"];',{name:name}))}),each(nativeCommands,function(v,name){nativeCode.push(substitute('var {name}Command = nativeCommands["{name}"];',{name:name}))}),nativeCode=nativeCode.join("\n");var lastLine=1;function markLine(pos,source){lastLine!==pos.line&&(lastLine=pos.line,source.push("pos.line = ".concat(pos.line,";")))}function getFunctionDeclare(functionName){return["function ".concat(functionName,"(scope, buffer, undefined) {\n    var data = scope.data;\n    var affix = scope.affix;")]}function guid(self,str){return str+self.uuid++}function considerSuffix(n,withSuffix){var name=n;return withSuffix&&!/\.xtpl$/.test(name)&&(name+=".xtpl"),name}function opExpression(e){var exp1,exp2,exp3,code1Source,code2Source,code3Source,code3,source=[],type=e.opType,code1=this[e.op1.type](e.op1),code2=this[e.op2.type](e.op2),exp=guid(this,"exp");return exp1=code1.exp,exp2=code2.exp,code1Source=code1.source,code2Source=code2.source,e.op3&&(exp3=(code3=this[e.op3.type](e.op3)).exp,code3Source=code3.source),pushToArray(source,code1Source),source.push("var ".concat(exp," = ").concat(exp1,";")),"&&"===type||"||"===type?(source.push("if(".concat("&&"===type?"":"!","(").concat(exp,")){")),pushToArray(source,code2Source),source.push("".concat(exp," = ").concat(exp2,";")),source.push("}")):"?:"===type?(pushToArray(source,code2Source),pushToArray(source,code3Source),source.push("".concat(exp," = (").concat(exp1,") ? (").concat(exp2,") : (").concat(exp3,");"))):(pushToArray(source,code2Source),source.push("".concat(exp," = (").concat(exp1,") ").concat(type," (").concat(exp2,");"))),{exp:exp,source:source}}function genFunction(self,statements){for(var statement,functionName=guid(self,"func"),source=getFunctionDeclare(functionName),_i=0,len=statements.length;_i<len;_i++)statement=statements[_i],pushToArray(source,self[statement.type](statement).source);return source.push(RETURN_BUFFER),source.push("}"),pushToArray(self.functionDeclares,source),functionName}function genConditionFunction(self,condition){var functionName=guid(self,"func"),source=getFunctionDeclare(functionName),gen=self[condition.type](condition);return pushToArray(source,gen.source),source.push("return ".concat(gen.exp,";")),source.push("}"),pushToArray(self.functionDeclares,source),functionName}function genOptionFromFunction(self,func,escape,fn,elseIfs,inverse){var source=[],params=func.params,hash=func.hash,funcParams=[],isSetFunction="set"===func.id.string;params&&each(params,function(param){var nextIdNameCode=self[param.type](param);pushToArray(source,nextIdNameCode.source),funcParams.push(nextIdNameCode.exp)});var funcHash=[];hash&&each(hash.value,function(h){var v=h[1],key=h[0],vCode=self[v.type](v);if(pushToArray(source,vCode.source),isSetFunction){var resolvedParts=convertIdPartsToRawAccessor(self,source,key.parts).resolvedParts;funcHash.push({key:resolvedParts,depth:key.depth,value:vCode.exp})}else{if(1!==key.parts.length||"string"!=typeof key.parts[0])throw new Error("invalid hash parameter");funcHash.push([wrapByDoubleQuote(key.string),vCode.exp])}});var exp="";if(funcParams.length||funcHash.length||escape||fn||inverse||elseIfs){if(escape&&(exp+=", escape: 1"),funcParams.length&&(exp+=", params: [ ".concat(funcParams.join(",")," ]")),funcHash.length){var hashStr=[];isSetFunction?(src_util.each(funcHash,function(h){hashStr.push("{ key: [".concat(h.key.join(","),"], value: ").concat(h.value,", depth: ").concat(h.depth," }"))}),exp+=",hash: [ ".concat(hashStr.join(",")," ]")):(src_util.each(funcHash,function(h){hashStr.push("".concat(h[0],":").concat(h[1]))}),exp+=",hash: { ".concat(hashStr.join(",")," }"))}fn&&(exp+=",fn: ".concat(fn)),inverse&&(exp+=",inverse: ".concat(inverse)),elseIfs&&(exp+=",elseIfs: ".concat(elseIfs)),exp="{ ".concat(exp.slice(1)," }")}return{exp:exp||"{}",funcParams:funcParams,source:source}}function generateFunction(self,func,block,escape_){var functionConfigCode,idName,escape=escape_,esmodule=self.config.esmodule,source=[];markLine(func.pos,source);var id=func.id,idString=id.string;idString in nativeCommands&&(escape=0);var i,idParts=id.parts;if("elseif"===idString)return{exp:"",source:[]};if(block){var fnName,elseIfsName,inverseName,elseIf,functionValue,statement,programNode=block.program,inverse=programNode.inverse,elseIfs=[],statements=programNode.statements,thenStatements=[];for(i=0;i<statements.length;i++)"expressionStatement"===(statement=statements[i]).type&&(functionValue=statement.value)&&(functionValue=functionValue.parts)&&1===functionValue.length&&(functionValue=functionValue[0])&&"function"===functionValue.type&&"elseif"===functionValue.id.string?(elseIf&&elseIfs.push(elseIf),elseIf={condition:functionValue.params[0],statements:[]}):elseIf?elseIf.statements.push(statement):thenStatements.push(statement);if(elseIf&&elseIfs.push(elseIf),fnName=genFunction(self,thenStatements),inverse&&(inverseName=genFunction(self,inverse)),elseIfs.length){var elseIfsVariable=[];for(i=0;i<elseIfs.length;i++){var elseIfStatement=elseIfs[i],conditionName=genConditionFunction(self,elseIfStatement.condition);elseIfsVariable.push("{\n        test: ".concat(conditionName,",\n        fn: ").concat(genFunction(self,elseIfStatement.statements),"\n        }"))}elseIfsName="[ ".concat(elseIfsVariable.join(",")," ]")}functionConfigCode=genOptionFromFunction(self,func,escape,fnName,elseIfsName,inverseName),pushToArray(source,functionConfigCode.source)}var _self$config=self.config,isModule=_self$config.isModule,withSuffix=_self$config.withSuffix;if(("include"===idString||"parse"===idString||"extend"===idString)&&(!func.params||func.params.length>2))throw new Error("include/parse/extend can only has at most two parameter!");if(isModule&&("include"===idString||"parse"===idString)){var moduleName,name=considerSuffix(func.params[0].value,withSuffix);esmodule?(moduleName="esDep"+ ++self.uuid,source.push("import ".concat(moduleName,' from "').concat(name,'";'))):moduleName="require".concat('("',name,'")'),func.params[0]={type:"raw",value:moduleName}}if(functionConfigCode||(functionConfigCode=genOptionFromFunction(self,func,escape,null,null,null),pushToArray(source,functionConfigCode.source)),block||(idName=guid(self,"callRet"),source.push("var ".concat(idName))),idString in nativeCommands)if("extend"===idString){if(source.push("runtime.extendTpl = ".concat(functionConfigCode.exp)),source.push("buffer = buffer.async(\n      function(newBuffer){runtime.extendTplBuffer = newBuffer;}\n      );"),isModule){var _moduleName,_name=considerSuffix(func.params[0].value,withSuffix);esmodule?(_moduleName="esDep"+ ++self.uuid,source.push("import ".concat(_moduleName,' from "').concat(_name,'";'))):_moduleName="require".concat('("',_name,'")'),source.push("runtime.extendTplFn = ".concat(_moduleName,";"))}}else"include"===idString?source.push("buffer = root.".concat(isModule?"includeModule":"include","(scope, ").concat(functionConfigCode.exp,", buffer,tpl);")):"includeOnce"===idString?source.push("buffer = root.".concat(isModule?"includeOnceModule":"includeOnce","(scope, ").concat(functionConfigCode.exp,", buffer,tpl);")):"parse"===idString?source.push("buffer = root.".concat(isModule?"includeModule":"include","(new scope.constructor(), ").concat(functionConfigCode.exp,", buffer, tpl);")):source.push(substitute(CALL_NATIVE_COMMAND,{lhs:block?"buffer":idName,name:idString,option:functionConfigCode.exp}));else if(block)source.push(substitute(CALL_CUSTOM_COMMAND,{option:functionConfigCode.exp,idParts:convertIdPartsToRawAccessor(self,source,idParts).arr}));else{var resolveParts=convertIdPartsToRawAccessor(self,source,idParts);resolveParts.funcRet?source.push(substitute(CALL_DATA_FUNCTION,{lhs:idName,params:functionConfigCode.funcParams.join(","),idParts:resolveParts.arr,depth:id.depth})):source.push(substitute(id.depth?CALL_FUNCTION_DEPTH:CALL_FUNCTION,{lhs:idName,option:functionConfigCode.exp,idParts:resolveParts.arr,depth:id.depth}))}return{exp:idName,source:source}}function AstToJSProcessor(config){this.functionDeclares=[],this.config=config||{},this.uuid=0}AstToJSProcessor.prototype={constructor:AstToJSProcessor,raw:function raw(_raw){return{exp:_raw.value}},arrayExpression:function arrayExpression(e){for(var r,list=e.list,len=list.length,source=[],exp=[],_i2=0;_i2<len;_i2++)r=this[list[_i2].type](list[_i2]),pushToArray(source,r.source),exp.push(r.exp);return{exp:"[ ".concat(exp.join(",")," ]"),source:source}},objectExpression:function objectExpression(e){for(var r,obj=e.obj,len=obj.length,source=[],exp=[],_i3=0;_i3<len;_i3++){var item=obj[_i3];r=this[item[1].type](item[1]),pushToArray(source,r.source),exp.push("".concat(wrapByDoubleQuote(item[0]),": ").concat(r.exp))}return{exp:"{ ".concat(exp.join(",")," }"),source:source}},conditionalExpression:opExpression,conditionalOrExpression:opExpression,conditionalAndExpression:opExpression,relationalExpression:opExpression,equalityExpression:opExpression,additiveExpression:opExpression,multiplicativeExpression:opExpression,unaryExpression:function unaryExpression(e){var code=this[e.value.type](e.value);return{exp:"".concat(e.unaryType,"(").concat(code.exp,")"),source:code.source}},string:function string(e){return{exp:wrapBySingleQuote(escapeString(e.value,1)),source:[]}},number:function number(e){return{exp:e.value,source:[]}},id:function id(idNode){var source=[],loose=!this.config.strict;if(markLine(idNode.pos,source),src_tools.isGlobalId(idNode))return{exp:idNode.string,source:source};var depth=idNode.depth,idParts=idNode.parts,idName=guid(this,"id");if(depth)return source.push(substitute(loose?"var {lhs} = scope.resolveLoose({idParts},{depth});":"var {lhs} = scope.resolve({idParts},{depth});",{lhs:idName,idParts:convertIdPartsToRawAccessor(this,source,idParts).arr,depth:depth})),{exp:idName,source:source};var remain,remainParts,part0=idParts[0];if("this"===part0)return remainParts=idParts.slice(1),source.push(substitute("var {lhs} = {value};",{lhs:idName,value:remainParts.length?chainedVariableRead(this,source,remainParts,void 0,void 0,loose):"data"})),{exp:idName,source:source};if("root"===part0)return(remain=(remainParts=idParts.slice(1)).join("."))&&(remain=".".concat(remain)),source.push(substitute("var {lhs} = {value};",{lhs:idName,value:remain?chainedVariableRead(this,source,remainParts,!0,void 0,loose):"scope.root.data",idParts:remain})),{exp:idName,source:source};if("function"===idParts[0].type){for(var value,resolvedParts=convertIdPartsToRawAccessor(this,source,idParts).resolvedParts,_i4=1;_i4<resolvedParts.length;_i4++)resolvedParts[_i4]="[ ".concat(resolvedParts[_i4]," ]");if(loose)value=src_tools.genStackJudge(resolvedParts.slice(1),resolvedParts[0]);else{value=resolvedParts[0];for(var ri=1;ri<resolvedParts.length;ri++)value+=resolvedParts[ri]}source.push(substitute("var {lhs} = {value};",{lhs:idName,value:value}))}else source.push(substitute("var {lhs} = {value};",{lhs:idName,value:chainedVariableRead(this,source,idParts,!1,!0,loose)}));return{exp:idName,source:source}},function:function _function(func,escape){return generateFunction(this,func,!1,escape)},blockStatement:function blockStatement(block){return generateFunction(this,block.func,block)},expressionStatement:function expressionStatement(_expressionStatement){var code,expressionOrVariable,source=[],escape=_expressionStatement.escape,expression=_expressionStatement.value;return code=this[expression.type](expression,escape),pushToArray(source,code.source),expressionOrVariable=code.exp,source.push(substitute(escape?"buffer = buffer.writeEscaped({value});":"buffer = buffer.write({value});",{value:expressionOrVariable})),{exp:"",source:source}},contentStatement:function contentStatement(_contentStatement){return{exp:"",source:[substitute("buffer.data += {value};",{value:wrapBySingleQuote(escapeString(_contentStatement.value,0))})]}}};var anonymousCount=0,compiler={parse:function parse(tplContent,name){if(tplContent){var ret;try{src_parser.lexer.filename=name,ret=src_parser.parse(tplContent,name)}catch(err){var e;e=err instanceof Error?err:new Error(err);try{e.stack="XTemplate error "+e.stack,e.message="XTemplate error "+e.message}catch(e2){}throw e}return ret}return{statements:[]}},compileToCode:function compileToCode(param){var func=compiler.compileToJson(param);return{func:substitute("function {functionName}({params}){\n  {body}\n}",{functionName:param.functionName||"",params:func.params.join(","),body:func.source}),imports:func.imports.join("\n")}},compileToJson:function compileToJson(param){!function resetGlobal(){lastLine=1}();var name=param.name=param.name||"xtemplate".concat(++anonymousCount),content=param.content,root=compiler.parse(content,name);return function genTopFunction(self,statements){var statement,i,len,catchError=self.config.catchError,source=[TOP_DECLARATION,nativeCode,catchError?"try {":""];for(i=0,len=statements.length;i<len;i++)statement=statements[i],pushToArray(source,self[statement.type](statement,{top:1}).source);source.splice.apply(source,[2,0].concat(self.functionDeclares).concat("")),source.push(RETURN_BUFFER),catchError&&source.push.apply(source,["} catch(e) {","if(!e.xtpl){","buffer.error(e);","}else{ throw e; }","}"]);var imports=[];for(i=source.length-1;i>0;i--){var c=source[i];c.startsWith("import ")&&(imports.push(c),source.splice(i,1))}return{imports:imports,params:["undefined"],source:source.join("\n")}}(new AstToJSProcessor(param),root.statements)},compile:function compile(tplContent,name,config){var code=compiler.compileToJson(src_util.merge(config,{content:tplContent,name:name})),source=code.source;source+=substitute("\n  //# sourceURL = {name}.js\n",{name:name});var args=code.params.concat(source);return Function.apply(null,args)}},xtemplate_compiler_src=compiler;function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var xtemplate_src_util=src.util,_compile=xtemplate_compiler_src.compile;function XTemplate(tpl_,config_){var tpl=tpl_,config=config_,tplType=_typeof(tpl);if("string"!==tplType&&"function"!==tplType&&(config=tpl,tpl=void 0),config=this.config=xtemplate_src_util.merge(XTemplate.globalConfig,config),"string"===tplType)try{tpl=this.compile(tpl,config.name)}catch(err){this.compileError=err}src.call(this,tpl,config)}function Noop(){}Noop.prototype=src.prototype,XTemplate.prototype=new Noop,XTemplate.prototype.constructor=XTemplate,xtemplate_src_util.mix(XTemplate.prototype,{compile:function compile(content,name){return _compile(content,name,this.config)},render:function render(data,option,callback_){var callback=callback_;"function"==typeof option&&(callback=option);var compileError=this.compileError;if(!compileError)return src.prototype.render.apply(this,arguments);if(!callback)throw compileError;callback(compileError)}});__webpack_exports__.a=xtemplate_src_util.mix(XTemplate,{globalConfig:{},config:src.config,compile:_compile,Compiler:xtemplate_compiler_src,Scope:src.Scope,Runtime:src,addCommand:src.addCommand,removeCommand:src.removeCommand})},496:function(module,exports,__webpack_require__){var map={"./gen-func.stories.js":497,"./parse.stories.js":637,"./playground.stories.js":638};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=496},497:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45),highlight_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(227),highlight_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(highlight_js__WEBPACK_IMPORTED_MODULE_2__),js_beautify__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(228),js_beautify__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_3__),_storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}var Test=function(_React$Component){function Test(){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Test),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Test).call(this))).parse=_this.parse.bind(_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Test,react__WEBPACK_IMPORTED_MODULE_0___default.a.Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Test,[{key:"parse",value:function parse(){var refs=this.refs,func=_packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__.a.Compiler.compileToCode({content:refs.tpl.value,catchError:refs.catchError.checked,useNativeRequire:refs.useNativeRequire.checked,isModule:refs.isModule.checked,strict:refs.strict.checked}).func;refs.gen.innerHTML='<pre class="brush: js;">\n'.concat(highlight_js__WEBPACK_IMPORTED_MODULE_2___default.a.highlight("js",function jsBeauty(str){return js_beautify__WEBPACK_IMPORTED_MODULE_3___default()(str,{indent_size:"4",indent_char:" ",preserve_newlines:!0,brace_style:"collapse",keep_array_indentation:!1,space_after_anon_function:!0})}(func)).value,"\n</pre>")}},{key:"render",value:function render(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"//g.tbcdn.cn/kissy/k/1.4.2/css/dpl/base.css"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"//g.tbcdn.cn/kissy/k/1.4.2/css/dpl/forms.css"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"//g.tbcdn.cn/kissy/k/1.4.2/button/assets/dpl.css"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"span8"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,""),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea",{style:{width:350,height:400},ref:"tpl",defaultValue:"\n                    {{x.y.z.q}}\n\n                  my first {{tpl(name ,'0', file=3)}} o\n\n                  {{include('./y')}}\n\n                  {{#each(this)}}\n                  {{xindex}} {{name}}\n                  {{/each}}\n\n                  {{{ noEscapeO}}}\n\n                  {{!\n\n                    haha\n\n                  }}\n\n                  {{#if (cond)}}\n\n                  y\n\n                  {{#each (my)}}\n\n                  {{escapeName}}\n\n                  {{#if (cond2)}}\n\n                  {{break}}\n\n                  {{else}}\n\n                  {{../../z}}\n\n                  {{/if}}\n\n                  {{/each}}\n\n                  {{else}}\n\n                  z\n\n                  {{/if}}\n"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{ref:"parse",className:"ks-button",onClick:this.parse},"parse"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label",null,"isModule: ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{type:"checkbox",ref:"isModule"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label",null,"useNativeRequire:",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{type:"checkbox",ref:"useNativeRequire"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label",null,"catchError: ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{type:"checkbox",ref:"catchError"}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label",null,"strict: ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{type:"checkbox",ref:"strict"})))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"span15"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"Generated Template Function"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{ref:"gen"}))))))}}]),Test}();Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("gen-func",module).add("demo",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Test,null)})}.call(this,__webpack_require__(81)(module))},637:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}var Test=function(_React$Component){function Test(){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Test),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Test).call(this))).parse=_this.parse.bind(_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Test,react__WEBPACK_IMPORTED_MODULE_0___default.a.Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Test,[{key:"parse",value:function parse(){var g=_packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__.a.Compiler.parse(this.refs.tpl.value);console.log(g)}},{key:"render",value:function render(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"//g.tbcdn.cn/kissy/k/1.4.2/css/dpl/base.css"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"//g.tbcdn.cn/kissy/k/1.4.2/css/dpl/forms.css"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"//g.tbcdn.cn/kissy/k/1.4.2/button/assets/dpl.css"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"row"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"span8"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,""),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea",{style:{width:350,height:400},ref:"tpl",defaultValue:"\n                    {{3*4*5}}\n"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{ref:"parse",className:"ks-button",onClick:this.parse},"parse")))))}}]),Test}();Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("parse",module).add("demo",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Test,null)})}.call(this,__webpack_require__(81)(module))},638:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"loadTemplate",function(){return loadTemplate}),__webpack_require__.d(__webpack_exports__,"registerTemplate",function(){return registerTemplate}),__webpack_require__.d(__webpack_exports__,"clearTemplates",function(){return clearTemplates});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27),textareaStyle={width:600,height:200},labelStyle={display:"inline-block",width:100};function start(){var data={},dataContent=document.getElementById("data").value.trim();dataContent&&(data=JSON.parse(dataContent));var subTemplate=document.getElementById("subTemplate").value.trim();subTemplate&&(subTemplate=JSON.parse(subTemplate)),templates=subTemplate,console.log(new _packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__.a(document.getElementById("template").value,{name:"story/test"}).render(data))}var templates={};function loadTemplate(tpl,callback){var name=tpl.name,content=templates[name];if(content){if("string"==typeof content)try{content=tpl.root.compile(content,name)}catch(e){return callback(e)}callback(void 0,content)}else{var error='template "'.concat(name,'" does not exist');console.error(error),callback(error)}}function registerTemplate(name,tpl){templates[name]=tpl}function clearTemplates(){templates={}}_packages_xtemplate__WEBPACK_IMPORTED_MODULE_1__.a.config("loader",{load:loadTemplate});var Test=function Test(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{margin:10}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{style:labelStyle},"template:"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea",{style:textareaStyle,id:"template",defaultValue:"Hello {{world}}!"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{style:labelStyle},"sub template(json):"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea",{style:textareaStyle,id:"subTemplate",defaultValue:""})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{style:labelStyle},"data(json):"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("textarea",{style:textareaStyle,id:"data",defaultValue:'{ "world": "world"}'})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:start},"render to console"))};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("playground",module).add("demo",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Test,null)})}.call(this,__webpack_require__(81)(module))}},[[229,1,2]]]);
//# sourceMappingURL=main.55371b47edbdecaeb12e.bundle.js.map